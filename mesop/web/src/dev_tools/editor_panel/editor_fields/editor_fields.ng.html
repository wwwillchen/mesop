<div class="fields-section">
  @if(getHiddenFields().length) {
  <div class="add-property">
    <label class="input-label">+</label>:
    <select class="select" (change)="onNewProperty($event)">
      <option value=""></option>
      @for(fieldName of getHiddenFields(); track $index) {
      <option [value]="fieldName">{{fieldName}}</option>
      }
    </select>
  </div>
  } @for(field of getRegularFields(); track $index) {
  <div class="field-block">
    @switch(field.getType()?.getTypeCase()) {@case(FieldTypeCase.INT_TYPE) {
    <label class="input-label">{{field.getName()}}</label>:
    <input
      class="input"
      type="number"
      (blur)="onBlur($event)"
      [attr.data-name]="field.getName()"
      [value]="getValueFor(field.getName())"
    />
    } @case(FieldTypeCase.FLOAT_TYPE) {
    <label class="input-label">{{field.getName()}}</label>:
    <input
      class="input"
      type="number"
      (blur)="onBlur($event)"
      [attr.data-name]="field.getName()"
      [value]="getValueFor(field.getName())"
    />
    } @case(FieldTypeCase.LIST_TYPE) {
    <div>List</div>
    <mesop-editor-fields
      [fields]="getFieldsForListField(field)"
    ></mesop-editor-fields>

    } @case(FieldTypeCase.STRING_TYPE) { @if(field.getName() === "text") {
    <label class="input-label">{{field.getName()}}</label>:
    <textarea
      class="input"
      (blur)="onBlur($event)"
      [attr.data-name]="field.getName()"
      [value]="getValueFor(field.getName())"
    ></textarea>
    } @else {
    <label class="input-label">{{field.getName()}}</label>:
    <input
      class="input"
      (blur)="onBlur($event)"
      [attr.data-name]="field.getName()"
      [value]="getValueFor(field.getName())"
    />
    } } @case(FieldTypeCase.LITERAL_TYPE) {
    <label class="input-label">{{field.getName()}}</label>:
    <select
      [attr.data-name]="field.getName()"
      class="select"
      (change)="onSelectLiteral($event)"
    >
      @for(literal of field.getType()!.getLiteralType()?.getLiteralsList();
      track $index) {
      <option
        [value]="$index"
        [selected]="isLiteralSelected(field.getName(), literal)"
      >
        {{getLiteralValue(literal)}}
      </option>
      }
    </select>
    } @case(FieldTypeCase.STRUCT_TYPE) {
    <div class="struct-section">
      <div class="struct-name">{{field.getName()}}</div>
      <div class="struct-body">
        <mesop-editor-fields
          [fields]="field.getType()!.getStructType()!.getFieldsList()"
          [prefixes]="getPrefixFor(field.getName())"
        >
        </mesop-editor-fields>
      </div>
    </div>
    } @default {
    <div class="field-name">
      Error: unhandled field name {{field.getName()}}
    </div>
    } }
  </div>

  } @for(field of getBoolFields(); track $index) {
  <mat-checkbox
    [checked]="!!getValueFor(field.getName())"
    [value]="field.getName()"
    (change)="onCheckboxChange($event)"
    >{{field.getName()}}</mat-checkbox
  >
  } @if(getNonTypedFields().length) {
  <div class="other-fields-title">Other fields</div>
  @for(field of getNonTypedFields(); track $index) {
  <div class="non-typed-field-name">{{field.getName()}}</div>
  } }
</div>
