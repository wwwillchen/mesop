<!-- box is a special component where we can't delegate it to another
Angular component (e.g. mesop-box) because it will create an intermediate DOM node
which interferes with Flexbox styling which requires children (direct descendants)
to have certain styling properties -->

<div
  (click)="isEditorMode ? isEditorOverlayOpen = !isEditorOverlayOpen : null"
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
>
  <ng-container *ngIf="type()?.getName() === 'box' || type() == null">
    <ng-container
      *ngFor="let child of component.getChildrenList(); trackBy: trackByFn"
    >
      <component-renderer [component]="child"> </component-renderer>
    </ng-container>
  </ng-container>

  <ng-template #childrenTemplate>
    <ng-container
      *ngFor="let child of component.getChildrenList(); trackBy: trackByFn"
    >
      <component-renderer [component]="child"> </component-renderer>
    </ng-container>
  </ng-template>
</div>

<!-- Editor overlay -->
<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isEditorOverlayOpen"
>
  <div class="editor-overlay">
    Component name
    <span class="divider"></span>
    <button mat-icon-button>
      <mat-icon color="white">delete</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon color="white">content_copy</mat-icon>
    </button>
  </div>
</ng-template>
